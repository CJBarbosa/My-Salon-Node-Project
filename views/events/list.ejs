<!DOCTYPE html>
<html class="h-100" lang="en">
  <head>
    <%- include('../layouts/head'); %>
  </head>
  <body class="d-flex flex-column h-100" id="the-stylist">
    <%- include('../layouts/event-body-header'); %>

    <a
      href="/events/create?date=<%= date %>"
      class="btn btn-outline-danger col-sm-3 mb-3"
      >Create a new schedule</a
    >
    <a href="/admin-area" class="btn btn-outline-primary col-sm-2 mb-3"
      >Return</a
    >

    <table class="table">
      <thead class="custonbgb">
        <tr>
          <th scope="col">SCHEDULE:</th>
          <th scope="col">NAME:</th>
          <th scope="col">PHONE:</th>
          <th scope="col">ACTION:</th>
        </tr>
      </thead>
      <tbody>
        <% events.forEach((event) => { %>
        <tr>
          <th scope="row"><%= event.schedule %></th>
          <td><%= event.firstName %> <%= event.lastName %></td>
          <td><%= event.phone.replace(/\D+/g, '')
            .replace(/(\d{3})(\d{3})(\d{4})/, '($1)$2-$3'); %></td>
          <td>
            <a
              class="bk bk-detail btn btn-outline-success"
              href="/events/<%= event.id %>"
              title="Details"
            ></a>
            <a
              class="bk bk-edit btn btn-outline-primary"
              href="/events/<%= event.id %>/update"
              title="Edit"
            ></a>
            <a
              class="bk bk-delete btn btn-outline-danger"
              href="/events/<%= event._id %>/delete"
              title="Delete"
            ></a>
          </td>
        </tr>
        <% }); %>
      </tbody>
    </table>
    <h3>
      <%= events.length <= 0 ? "Sorry! there's no schedules to be shown" : ''
      %>
    </h3>

    <%- include('../layouts/event-body-footer'); %>
    <!-- Footer -->
    <%- include ../layouts/footer %>
    <script>      
      //Get date from Calendar and transfer it to Card header title
      getClickedDate(<%- JSON.stringify(date) %>);
    </script>
  </body>
</html>
